<ion-view title="{{'Modifier la dépense'|translate}}" id="addexpense">

    <ion-nav-buttons side="right">
        <a ng-click="deleteExpense()" class="button button-clear button-clear icon-left ion-ios7-trash-outline"></a>
        <a class="button button-clear icon-left ion-checkmark" ng-click="validForm()"></a>
    </ion-nav-buttons>
  
<form novalidate="novalidate" on-valid-submit="addExpense()">
    <ion-content has-header has-footer scroll="false">
    
    <ion-slide-box on-slide-changed="slideChanged(index)">
    <ion-slide >
    <div>
        <div class="list" >
            <div translate style="text-align:center;line-height:28px;padding-top:10px;font-size:14px;"> Qui a payé ?</div>
         <label class="item item-input item-icon-right item-label first-item"><div class="validate{{member.share}}" style="background-color:white;margin: 3px;height: 44px;border-radius: 4px;width: 100%;">
            <i class="icon ion-arrow-down-b icon-accessory"></i>
            <select id="user_who_paid" ng-model="expense.spender" ng-options="member.guid as member.username for member in groupMembers | filter: {visible : 'true'}" required="required" style="height: 100%;
width: 100%;max-width: 100%;text-align: center;left: 5%;position: relative;"></select></div>
        </label>
            <div translate style="text-align:center;line-height:28px;font-size:14px;"> Combien ?</div>
        <label class="item item-input item-label">
           <input ng-show="tel_keyboard" id="amount_field" style="text-align: center;height: 44px;margin: 3px;padding-right: 0px;" ng-change="calculateShares()" placeholder="0.00" ng-model="expense.amount" type="tel" step="any">
           <input ng-show="!tel_keyboard" id="amount_field" style="text-align: center;height: 44px;margin: 3px;padding-right: 0px;" ng-change="calculateShares()" placeholder="0.00" ng-model="expense.amount" type="number" step="any">
            <div translate class="amount" style="color:grey">{{currency_symbol}}</div>
 
        </label>
            <div translate style="text-align:center;line-height:28px;font-size:14px;"> Pourquoi ?</div>
        <label class="item item-input item-label">

            <input id="motif_field" style="background-color:white;border-radius:4px;height:46px;padding:10px;margin:3px" maxlength="255" ng-model="expense.title" type="text" placeholder="{{'Motif de la dépense (facultatif)'|translate}}" name="comment">
        </label>
            
        <label class="item item-input item-label item-icon-left">

            <i class="icon ion-calendar icon-accessory "></i><div translate style="position:relative;left:35px;font-size:14px;">Quand ?</div>
            <input type="date" id="datef" ng-model="expense.date" style="text-align: right;color:grey;padding-right:0px">
        </label>
    </div>
</div>
<div style="margin: 0 auto;line-height: 40px;color:#C2C2C2;border-radius: 400px;width: 80%;text-align: center;"><span translate>Glisser pour accéder aux participants</span><i class="icon ion-ios7-arrow-forward" style="padding:2px;padding-left:10px"></i><i class="icon ion-ios7-arrow-forward" style="padding:0px;padding"></i></div>
</div>

</ion-slide>
<ion-slide> 

<ion-content scroll="true">

  <div style="line-height:25px;background-color:#0E6BB9;color:white;text-align:center;"><span style="font-weight: bold;">{{membersNames[expense.spender]}}</span> <span translate>a dépensé</span> <span style="font-weight: bold;">{{expense.amount | currency:group.currency}}</span> </div>

<div class="item item-input item-label">
    <span translate class="input-label">Participants</span>
    <a translate ng-click="selectAll($event)" id="allbutton" class="button button-balanced button-small ion-checkmark align-right"> Sélectionner tous</a>
</div>

<ul class="list members">


 <li class="item item-checkbox" ng-repeat="member in groupMembers | filter: {visible : 'true'}">
    <label class="checkbox" style="width:60%">
        <input ng-model="member.selected" ng-change="changeState(member)" type="checkbox" name="user">
    </label>
    <div style="line-height:46px;display:inline-block;left: 20px;position: relative" class="text{{member.share}}">{{member.username}}</div>
    <div style="float:right; display:inline-block">

     <div style="display:inline-block;text-align:right">
      <div class="user-share test{{member.share}}" style="padding-top: 4px;color:#00a8ec"><span class="user-share-count" >{{member.share}}</span> <span translate>part</span><span ng-show="member.share>1.5">s</span></div>
      <div translate class="user-shared-amount" style="font-size: 12px;color: grey;line-height: 14px;">{{member.sharedAmount}} {{currencySymbol(group.currency)}}</div> 
  </div>
  <button type="button" ng-click="removeShare(member)"  class="button icon ion-minus-round ico{{member.share}}"></button>
  <button type="button" ng-click="addShare(member)" class="button icon ion-plus-round ico{{member.share}}"></button>

</div>
</li>
</ul>
</ion-content>
</ion-slide>
</ion-slide-box>
</ion-content>
</form> 


</ion-view>
